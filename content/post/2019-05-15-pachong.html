---
title: 爬虫
author: Tian
date: '2019-05-15'
slug: 爬虫
categories: []
tags: []
---



<div id="rvest" class="section level1">
<h1>什么是爬虫rvest</h1>
<ul>
<li>read_html()：下载并解析网页</li>
<li>html_nodes()：定位并获取节点信息</li>
<li>html_text()：提取节点属性文本信息
## rvest 介绍</li>
<li>CRAN： <a href="https://cran.r-project.org/web/packages/rvest/index.html" class="uri">https://cran.r-project.org/web/packages/rvest/index.html</a></li>
</ul>
<pre class="r"><code>x &lt;- 1:10
y &lt;- 11:20
plot(x,y)</code></pre>
<p><img src="/post/2019-05-15-pachong_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>library(rvest)</code></pre>
<pre><code>## 载入需要的程辑包：xml2</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;rvest&#39;:
##   method            from
##   read_xml.response xml2</code></pre>
<pre class="r"><code>library(knitr)
link &lt;- &quot;https://www.ncbi.nlm.nih.gov/pubmed/?term=disaster&quot;
web &lt;- read_html(link)

title &lt;- web %&gt;% html_nodes(&#39;div.rslt p.title a&#39;) %&gt;% html_text()

author &lt;- web %&gt;% html_nodes(&#39;div.supp p.desc&#39;) %&gt;%html_text()

journal &lt;- web %&gt;% html_nodes(&#39;div.supp p.details span&#39;) %&gt;%html_text()

dat &lt;- data.frame(Title = title, Author = author, Journal = journal)
kable(dat, format = &quot;html&quot;)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
Title
</th>
<th style="text-align:left;">
Author
</th>
<th style="text-align:left;">
Journal
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
The role of event relevance and congruence to social groups in flashbulb memory formation.
</td>
<td style="text-align:left;">
Talarico JM, Bohn A, Wessel I.
</td>
<td style="text-align:left;">
Memory
</td>
</tr>
<tr>
<td style="text-align:left;">
Substitute or complement? How social capital, age and socioeconomic status interacted to impact mortality in Japan’s 3/11 tsunami.
</td>
<td style="text-align:left;">
Ye M, Aldrich DP.
</td>
<td style="text-align:left;">
SSM Popul Health
</td>
</tr>
<tr>
<td style="text-align:left;">
Survey data of household perceptions of drought, mitigation and adaptation practices in East Nusa Tenggara, Indonesia.
</td>
<td style="text-align:left;">
Kuswanto H, Hibatullah F, Soedjono ES, Efendi F.
</td>
<td style="text-align:left;">
Data Brief
</td>
</tr>
<tr>
<td style="text-align:left;">
Sexual Function and Factors Affecting Menopause: A Systematic Review.
</td>
<td style="text-align:left;">
Heidari M, Ghodusi M, Rezaei P, Kabirian Abyaneh S, Sureshjani EH, Sheikhi RA.
</td>
<td style="text-align:left;">
J Menopausal Med
</td>
</tr>
<tr>
<td style="text-align:left;">
Premature Death of a Schizophrenic Patient due to Evacuation after a Nuclear Disaster in Fukushima.
</td>
<td style="text-align:left;">
Sonoda Y, Ozaki A, Hori A, Higuchi A, Shimada Y, Yamamoto K, Morita T, Sawano T, Leppold C, Tsubokura M.
</td>
<td style="text-align:left;">
Case Rep Psychiatry
</td>
</tr>
<tr>
<td style="text-align:left;">
A Study of Surgical Cases During Earthquake Disaster in A Medical College.
</td>
<td style="text-align:left;">
K C K, Thapa RK, Khadka S, Paudel D.
</td>
<td style="text-align:left;">
JNMA J Nepal Med Assoc
</td>
</tr>
<tr>
<td style="text-align:left;">
Miyagi Medical and Welfare Information Network: A Backup System for Patient Clinical Information after the Great East Japan Earthquake and Tsunami.
</td>
<td style="text-align:left;">
Ido K, Nakamura N, Nakayama M.
</td>
<td style="text-align:left;">
Tohoku J Exp Med
</td>
</tr>
<tr>
<td style="text-align:left;">
Determining Key Influences on Patient Ability to Successfully Manage Noncommunicable Disease After Natural Disaster.
</td>
<td style="text-align:left;">
Ryan BJ, Franklin RC, Burkle FM, Smith EC, Aitken P, Leggat PA.
</td>
<td style="text-align:left;">
Prehosp Disaster Med
</td>
</tr>
<tr>
<td style="text-align:left;">
Experimental and field investigations on seismic response of joints and beddings in rocks.
</td>
<td style="text-align:left;">
Liu Y, Lu CP, Liu B, Zhang H, Wang HY.
</td>
<td style="text-align:left;">
Ultrasonics
</td>
</tr>
<tr>
<td style="text-align:left;">
A temperature indicator for heavy air pollution risks (TIP).
</td>
<td style="text-align:left;">
Zhang Y, Wang S, Fan X, Xin J, Cheng Y.
</td>
<td style="text-align:left;">
Sci Total Environ
</td>
</tr>
<tr>
<td style="text-align:left;">
Degradation of nitrilotris-methylenephosphonic acid (NTMP) antiscalant via persulfate photolysis: Implications on desalination concentrate treatment.
</td>
<td style="text-align:left;">
Wang Z, Chen G, Patton S, Ren C, Liu J, Liu H.
</td>
<td style="text-align:left;">
Water Res
</td>
</tr>
<tr>
<td style="text-align:left;">
Surface nitrous oxide concentrations and fluxes from water bodies of the agricultural watershed in Eastern China.
</td>
<td style="text-align:left;">
Xiao Q, Hu Z, Fu C, Bian H, Lee X, Chen S, Shang D.
</td>
<td style="text-align:left;">
Environ Pollut
</td>
</tr>
<tr>
<td style="text-align:left;">
Geochemical discrimination of bulk organic matter in surface sediments of the Cross River estuary system and adjacent shelf, South East Nigeria (West Africa).
</td>
<td style="text-align:left;">
Dan SF, Liu SM, Yang B, Udoh EC, Umoh U, Ewa-Oboho I.
</td>
<td style="text-align:left;">
Sci Total Environ
</td>
</tr>
<tr>
<td style="text-align:left;">
Prevalence of depression among Bangladeshi village women subsequent to a natural disaster: A pilot study.
</td>
<td style="text-align:left;">
Mamun MA, Huq N, Papia ZF, Tasfina S, Gozal D.
</td>
<td style="text-align:left;">
Psychiatry Res
</td>
</tr>
<tr>
<td style="text-align:left;">
Collaborative Management Strategies for Drug Shortages in Neurocritical Care.
</td>
<td style="text-align:left;">
Clark SL, Levasseur-Franklin K, Pajoumand M, Barra M, Armahizer M, Patel DV, Wyatt Chester K, Tully AP.
</td>
<td style="text-align:left;">
Neurocrit Care
</td>
</tr>
<tr>
<td style="text-align:left;">
Numerical simulation study of strip filling for water-preserved coal mining.
</td>
<td style="text-align:left;">
Sun WB, Wang Y, Qiu HF, Ding ZW.
</td>
<td style="text-align:left;">
Environ Sci Pollut Res Int
</td>
</tr>
<tr>
<td style="text-align:left;">
The combined effects of nitrogen fertilizer, humic acid, and gypsum on yield-scaled greenhouse gas emissions from a coastal saline rice field.
</td>
<td style="text-align:left;">
Sun L, Ma Y, Liu Y, Li J, Deng J, Rao X, Zhang Y.
</td>
<td style="text-align:left;">
Environ Sci Pollut Res Int
</td>
</tr>
<tr>
<td style="text-align:left;">
Molecular Simulation Study on the Microscopic Structure and Mechanical Property of Defect-Containing sI Methane Hydrate.
</td>
<td style="text-align:left;">
Cai S, Tang Q, Tian S, Lu Y, Gao X.
</td>
<td style="text-align:left;">
Int J Mol Sci
</td>
</tr>
<tr>
<td style="text-align:left;">
Effect of Al⁻Zn Alloy Coating on Corrosion Fatigue Behavior of X80 Riser Steel.
</td>
<td style="text-align:left;">
Han Z, Huang X, Yang Z.
</td>
<td style="text-align:left;">
Materials (Basel)
</td>
</tr>
<tr>
<td style="text-align:left;">
Radiation-Induced Heart Diseases: Protective Effects of Natural Products.
</td>
<td style="text-align:left;">
Musa AE, Shabeeb D.
</td>
<td style="text-align:left;">
Medicina (Kaunas)
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>print(dat)</code></pre>
<pre><code>##                                                                                                                                                             Title
## 1                                                                      The role of event relevance and congruence to social groups in flashbulb memory formation.
## 2                              Substitute or complement? How social capital, age and socioeconomic status interacted to impact mortality in Japan&#39;s 3/11 tsunami.
## 3                                          Survey data of household perceptions of drought, mitigation and adaptation practices in East Nusa Tenggara, Indonesia.
## 4                                                                                           Sexual Function and Factors Affecting Menopause: A Systematic Review.
## 5                                                             Premature Death of a Schizophrenic Patient due to Evacuation after a Nuclear Disaster in Fukushima.
## 6                                                                                      A Study of Surgical Cases During Earthquake Disaster in A Medical College.
## 7             Miyagi Medical and Welfare Information Network: A Backup System for Patient Clinical Information after the Great East Japan Earthquake and Tsunami.
## 8                                            Determining Key Influences on Patient Ability to Successfully Manage Noncommunicable Disease After Natural Disaster.
## 9                                                                      Experimental and field investigations on seismic response of joints and beddings in rocks.
## 10                                                                                                   A temperature indicator for heavy air pollution risks (TIP).
## 11          Degradation of nitrilotris-methylenephosphonic acid (NTMP) antiscalant via persulfate photolysis: Implications on desalination concentrate treatment.
## 12                                              Surface nitrous oxide concentrations and fluxes from water bodies of the agricultural watershed in Eastern China.
## 13 Geochemical discrimination of bulk organic matter in surface sediments of the Cross River estuary system and adjacent shelf, South East Nigeria (West Africa).
## 14                                                      Prevalence of depression among Bangladeshi village women subsequent to a natural disaster: A pilot study.
## 15                                                                                  Collaborative Management Strategies for Drug Shortages in Neurocritical Care.
## 16                                                                                   Numerical simulation study of strip filling for water-preserved coal mining.
## 17                 The combined effects of nitrogen fertilizer, humic acid, and gypsum on yield-scaled greenhouse gas emissions from a coastal saline rice field.
## 18                                       Molecular Simulation Study on the Microscopic Structure and Mechanical Property of Defect-Containing sI Methane Hydrate.
## 19                                                                         Effect of Al&lt;U+207B&gt;Zn Alloy Coating on Corrosion Fatigue Behavior of X80 Riser Steel.
## 20                                                                                      Radiation-Induced Heart Diseases: Protective Effects of Natural Products.
##                                                                                                      Author
## 1                                                                            Talarico JM, Bohn A, Wessel I.
## 2                                                                                         Ye M, Aldrich DP.
## 3                                                          Kuswanto H, Hibatullah F, Soedjono ES, Efendi F.
## 4                            Heidari M, Ghodusi M, Rezaei P, Kabirian Abyaneh S, Sureshjani EH, Sheikhi RA.
## 5  Sonoda Y, Ozaki A, Hori A, Higuchi A, Shimada Y, Yamamoto K, Morita T, Sawano T, Leppold C, Tsubokura M.
## 6                                                                      K C K, Thapa RK, Khadka S, Paudel D.
## 7                                                                            Ido K, Nakamura N, Nakayama M.
## 8                                           Ryan BJ, Franklin RC, Burkle FM, Smith EC, Aitken P, Leggat PA.
## 9                                                                    Liu Y, Lu CP, Liu B, Zhang H, Wang HY.
## 10                                                                  Zhang Y, Wang S, Fan X, Xin J, Cheng Y.
## 11                                                           Wang Z, Chen G, Patton S, Ren C, Liu J, Liu H.
## 12                                                      Xiao Q, Hu Z, Fu C, Bian H, Lee X, Chen S, Shang D.
## 13                                                    Dan SF, Liu SM, Yang B, Udoh EC, Umoh U, Ewa-Oboho I.
## 14                                                           Mamun MA, Huq N, Papia ZF, Tasfina S, Gozal D.
## 15  Clark SL, Levasseur-Franklin K, Pajoumand M, Barra M, Armahizer M, Patel DV, Wyatt Chester K, Tully AP.
## 16                                                                         Sun WB, Wang Y, Qiu HF, Ding ZW.
## 17                                                        Sun L, Ma Y, Liu Y, Li J, Deng J, Rao X, Zhang Y.
## 18                                                                      Cai S, Tang Q, Tian S, Lu Y, Gao X.
## 19                                                                                  Han Z, Huang X, Yang Z.
## 20                                                                                      Musa AE, Shabeeb D.
##                       Journal
## 1                      Memory
## 2            SSM Popul Health
## 3                  Data Brief
## 4            J Menopausal Med
## 5         Case Rep Psychiatry
## 6      JNMA J Nepal Med Assoc
## 7            Tohoku J Exp Med
## 8        Prehosp Disaster Med
## 9                 Ultrasonics
## 10          Sci Total Environ
## 11                  Water Res
## 12             Environ Pollut
## 13          Sci Total Environ
## 14             Psychiatry Res
## 15             Neurocrit Care
## 16 Environ Sci Pollut Res Int
## 17 Environ Sci Pollut Res Int
## 18              Int J Mol Sci
## 19          Materials (Basel)
## 20          Medicina (Kaunas)</code></pre>
<pre class="r"><code># write.table(dat, &#39;disaster1.csv&#39;, sep=&quot;,&quot;,row.names = F)
tj &lt;- table(dat[3])
hist(tj)</code></pre>
<p><img src="/post/2019-05-15-pachong_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code>paperS &lt;- function(x){
  
  library(rvest)
  library(knitr)
  link &lt;- paste0(&quot;https://www.ncbi.nlm.nih.gov/pubmed/?term=&quot;,x)
  web &lt;- read_html(link)
  
  title &lt;- web %&gt;% html_nodes(&#39;div.rslt p.title a&#39;) %&gt;% html_text()
  
  author &lt;- web %&gt;% html_nodes(&#39;div.supp p.desc&#39;) %&gt;%html_text()
  
  journal &lt;- web %&gt;% html_nodes(&#39;div.supp p.details span&#39;) %&gt;%html_text()
  
  dat &lt;- data.frame(Title = title, Author = author, Journal = journal)
  # write.table(dat, &#39;disaster1.csv&#39;, sep=&quot;,&quot;,row.names = F)
  kable(dat, format = &quot;html&quot;)
  
}
paperS(&quot;disaster+risk+reduction&quot;)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
Title
</th>
<th style="text-align:left;">
Author
</th>
<th style="text-align:left;">
Journal
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Influence of drainage network and compensatory techniques on urban flooding susceptibility.
</td>
<td style="text-align:left;">
Caprario J, Rech AS, Tasca FA, Finotti AR.
</td>
<td style="text-align:left;">
Water Sci Technol
</td>
</tr>
<tr>
<td style="text-align:left;">
Drinking Water Salinity, Urinary Macro-Mineral Excretions, and Blood Pressure in the Southwest Coastal Population of Bangladesh.
</td>
<td style="text-align:left;">
Naser AM, Rahman M, Unicomb L, Doza S, Gazi MS, Alam GR, Karim MR, Uddin MN, Khan GK, Ahmed KM, Shamsudduha M, Anand S, Narayan KMV, Chang HH, Luby SP, Gribble MO, Clasen TF.
</td>
<td style="text-align:left;">
J Am Heart Assoc
</td>
</tr>
<tr>
<td style="text-align:left;">
Disability and disaster risk reduction as an incongruent matrix: Lessons from rural Zimbabwe.
</td>
<td style="text-align:left;">
Lunga W, Pathias Bongo P, van Niekerk D, Musarurwa C.
</td>
<td style="text-align:left;">
Jamba
</td>
</tr>
<tr>
<td style="text-align:left;">
Participatory capacities and vulnerabilities assessment: Towards the realisation of community-based early warning system for deep-seated landslides.
</td>
<td style="text-align:left;">
Gumiran BAL, Moncada FM, Gasmen HJ, Boyles-Panting NR, Solidum RU.
</td>
<td style="text-align:left;">
Jamba
</td>
</tr>
<tr>
<td style="text-align:left;">
Health Risks in Disaster Responders: A Conceptual Framework.
</td>
<td style="text-align:left;">
Khatri J, Fitzgerald G, Poudyal Chhetri MB.
</td>
<td style="text-align:left;">
Prehosp Disaster Med
</td>
</tr>
<tr>
<td style="text-align:left;">
Improving the science and evidence base of disaster response: a policy research study.
</td>
<td style="text-align:left;">
Jillson IA, Clarke M, Allen C, Waller S, Koehlmoos T, Mumford W, Jansen J, McKay K, Trant A.
</td>
<td style="text-align:left;">
BMC Health Serv Res
</td>
</tr>
<tr>
<td style="text-align:left;">
Global Heat Wave Hazard Considering Humidity Effects during the 21st Century.
</td>
<td style="text-align:left;">
Chen X, Li N, Liu J, Zhang Z, Liu Y.
</td>
<td style="text-align:left;">
Int J Environ Res Public Health
</td>
</tr>
<tr>
<td style="text-align:left;">
Food-Related Health Emergency-Disaster Risk Reduction in Rural Ethnic Minority Communities: A Pilot Study of Knowledge, Awareness and Practice of Food Labelling and Salt-intake Reduction in a Kunge Community in China.
</td>
<td style="text-align:left;">
Chan EYY, Lam HCY, Lo ESK, Tsang SNS, Yung TKC, Wong CKP.
</td>
<td style="text-align:left;">
Int J Environ Res Public Health
</td>
</tr>
<tr>
<td style="text-align:left;">
Adoption of Individual Flood Damage Mitigation Measures in New York City: An Extension of Protection Motivation Theory.
</td>
<td style="text-align:left;">
Botzen WJW, Kunreuther H, Czajkowski J, de Moel H.
</td>
<td style="text-align:left;">
Risk Anal
</td>
</tr>
<tr>
<td style="text-align:left;">
Slip on a mapped normal fault for the 28th December 1908 Messina earthquake (Mw 7.1) in Italy.
</td>
<td style="text-align:left;">
Meschis M, Roberts GP, Mildon ZK, Robertson J, Michetti AM, Faure Walker JP.
</td>
<td style="text-align:left;">
Sci Rep
</td>
</tr>
<tr>
<td style="text-align:left;">
Natural disaster preparedness in a multi-hazard environment: Characterizing the sociodemographic profile of those better (worse) prepared.
</td>
<td style="text-align:left;">
Bronfman NC, Cisternas PC, Repetto PB, Castañeda JV.
</td>
<td style="text-align:left;">
PLoS One
</td>
</tr>
<tr>
<td style="text-align:left;">
Psychosocial Management Before, During, and After Emergencies and Disasters-Results from the Kobe Expert Meeting.
</td>
<td style="text-align:left;">
Généreux M, Schluter PJ, Takahashi S, Usami S, Mashino S, Kayano R, Kim Y.
</td>
<td style="text-align:left;">
Int J Environ Res Public Health
</td>
</tr>
<tr>
<td style="text-align:left;">
Intervention strategies for improvement of disasters risk perception: Family-centered approach.
</td>
<td style="text-align:left;">
Seyedin H, Samadipour E, Salmani I.
</td>
<td style="text-align:left;">
J Educ Health Promot
</td>
</tr>
<tr>
<td style="text-align:left;">
Design of Temperature Insurance Index and Risk Zonation for Single-Season Rice in Response to High-Temperature and Low-Temperature Damage: A Case Study of Jiangsu Province, China.
</td>
<td style="text-align:left;">
Guo J, Jin J, Tang Y, Wu X.
</td>
<td style="text-align:left;">
Int J Environ Res Public Health
</td>
</tr>
<tr>
<td style="text-align:left;">
Global Cancer Burden and Natural Disasters: A Focus on Asia’s Vulnerability, Resilience Building, and Impact on Cancer Care.
</td>
<td style="text-align:left;">
De Guzman R, Malik M.
</td>
<td style="text-align:left;">
J Glob Oncol
</td>
</tr>
<tr>
<td style="text-align:left;">
Is “Perceived Water Insecurity” Associated with Disaster Risk Perception, Preparedness Attitudes, and Coping Ability in Rural China? (A Health-EDRM Pilot Study).
</td>
<td style="text-align:left;">
Ho JY, Chan EYY, Lam HCY, Yeung MPS, Wong CKP, Yung TKC.
</td>
<td style="text-align:left;">
Int J Environ Res Public Health
</td>
</tr>
<tr>
<td style="text-align:left;">
WHO Thematic Platform for Health Emergency and Disaster Risk Management Research Network (TPRN): Report of the Kobe Expert Meeting.
</td>
<td style="text-align:left;">
Kayano R, Chan EY, Murray V, Abrahams J, Barber SL.
</td>
<td style="text-align:left;">
Int J Environ Res Public Health
</td>
</tr>
<tr>
<td style="text-align:left;">
How violence against women and girls undermines resilience to climate risks in Chad.
</td>
<td style="text-align:left;">
Masson VL, Benoudji C, Reyes SS, Bernard G.
</td>
<td style="text-align:left;">
Disasters
</td>
</tr>
<tr>
<td style="text-align:left;">
Complexity, continuity and change: livelihood resilience in the Darfur region of Sudan.
</td>
<td style="text-align:left;">
Young H, Ismail MA.
</td>
<td style="text-align:left;">
Disasters
</td>
</tr>
<tr>
<td style="text-align:left;">
Influencing resilience: the role of policy entrepreneurs in mainstreaming climate adaptation.
</td>
<td style="text-align:left;">
Tanner T, Zaman RU, Acharya S, Gogoi E, Bahadur A.
</td>
<td style="text-align:left;">
Disasters
</td>
</tr>
</tbody>
</table>
</div>
